@page
@model LearningSite.Web.Pages.Account.SignupModel
@{
}

<form method="POST">
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label asp-for="Vm.Name"></label>
                <input type="text" class="form-control" asp-for="Vm.Name" placeholder="Name" />
                <span class="text text text-danger" asp-validation-for="Vm.Name"></span>
            </div>
            <div class="form-group">
                <label asp-for="Vm.EmailAddress"></label>
                <input type="text" class="form-control" asp-for="Vm.EmailAddress" placeholder="Email Address" />
                <span class="text text-danger" asp-validation-for="Vm.EmailAddress"></span>
            </div>
            <div class="form-group">
                <label asp-for="Vm.Password"></label>
                <input class="form-control" asp-for="Vm.Password" placeholder="Password" type="password" />
                <span class="text text-danger" asp-validation-for="Vm.Password"></span>
            </div>
            <div class="form-group">
                <label asp-for="Vm.TimeZoneId"></label>
                <select class="form-control" asp-for="Vm.TimeZoneId" asp-items="Model.TimeZoneList" id="time-zone-id">
                    <option value="">Select Time Zone</option>
                </select>
                <span class="text text-danger" asp-validation-for="Vm.TimeZoneId"></span>
            </div>

            <div class="pt-3">
                <button class="btn btn-primary" type="submit">Signup</button>
            </div>
        </div>
    </div>
</form>

@section Scripts {
    @if (String.IsNullOrWhiteSpace(Model.Vm.TimeZoneId))
    {
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.34/moment-timezone-with-data.min.js"></script>
      <script type="text/javascript">
          var map = @Html.Raw(Json.Serialize(Model.TimeZoneMap));
          var ianaTz = moment.tz.guess();
          if (ianaTz) {
            var inputTz = map[ianaTz];
            if (inputTz) {
              document.querySelector("#time-zone-id").value = inputTz;
            }
          }
    </script>
    }
}
